




local function CanSeePlayer(player, maxDistance)
    if not WallCheck then
        return true
    end
    
    local localCharacter = LocalPlayer.Character
    if not localCharacter then
        return false
    end
    
    local targetCharacter = player.Character
    local targetPart = targetCharacter and targetCharacter:FindFirstChild(AimPart)
    if not targetPart then
        return false
    end
    
    local ray = Ray.new(Camera.CFrame.Position, (targetPart.Position - Camera.CFrame.Position).Unit * maxDistance)
    local hitPart, _ = workspace:FindPartOnRayWithIgnoreList(ray, {localCharacter})
    
    return not hitPart or not hitPart:IsDescendantOf(player.Character)
end

local function IsAlive(player)
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            return humanoid.Health > 0
        end
    end
    return false
end

local function FindBestTarget()
    local closestDistance = math.huge
    local lowestHealth = math.huge
    local screenCenter = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
    
    local lowestHealthTarget = nil
    local closestTarget = nil
    
    for _, player in ipairs(PlayersService:GetPlayers()) do
        if player ~= LocalPlayer and not (IgnoreTeam and IsTeammate(player)) then
            local character = player.Character
            
            if character and character:FindFirstChild(AimPart) then
                if not CheckAlive or IsAlive(player) then
                    if not WallCheck or CanSeePlayer(player, 100) then
                        local screenPosition, onScreen = Camera:WorldToViewportPoint(character[AimPart].Position)
                        if onScreen then
                            local distance = (Vector2.new(screenPosition.X, screenPosition.Y) - screenCenter).Magnitude
                            
                            if distance < closestDistance then
                                if distance < AimRadius then
                                    closestTarget = player
                                end
                                closestDistance = distance
                            end
                            
                            if TargetLowestHealth then
                                local humanoid = character:FindFirstChildOfClass("Humanoid")
                                if humanoid and humanoid.Health > 0 and humanoid.Health < lowestHealth then
                                    lowestHealth = humanoid.Health
                                    lowestHealthTarget = player
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    
    return (TargetLowestHealth and lowestHealthTarget) or closestTarget
end

local function GetPredictedPosition(player, deltaTime)
    if not UsePrediction then
        if player.Character and player.Character:FindFirstChild(AimPart) then
            return player.Character[AimPart].Position
        end
        return nil
    end
    
    local character = player.Character
    if character and character:FindFirstChild(AimPart) then
        local aimPart = character[AimPart]
        local velocity = aimPart.Velocity
        return aimPart.Position + velocity * deltaTime * PredictionScale
    end
    return nil
end

-- ==================== ç›®æ ‡é«˜äº®ç³»ç»Ÿ ====================
local CurrentTarget = nil
local HighlightedTargets = {}

local function HighlightTarget(player)
    if HighlightedTargets[player] then
        return
    end
    
    local character = player.Character
    if character then
        local highlight = Instance.new("Highlight")
        highlight.Adornee = character
        highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        highlight.FillColor = Color3.fromRGB(255, 0, 0)
        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
        highlight.FillTransparency = 0.5
        highlight.OutlineTransparency = 0
        highlight.Parent = character
        
        HighlightedTargets[player] = highlight
    end
end

local function RemoveHighlight(player)
    if HighlightedTargets[player] then
        HighlightedTargets[player]:Destroy()
        HighlightedTargets[player] = nil
    end
end

local function ClearAllHighlights()
    for player, highlight in pairs(HighlightedTargets) do
        highlight:Destroy()
        HighlightedTargets[player] = nil
    end
end

-- ==================== è‡ªç„ä¸»å¾ªç¯ ====================
local AimLoopConnection = nil

local function ToggleAim(enabled)
    if enabled then
        IsAimEnabled = true
        AimCircle.Visible = true
        AimCircle.Radius = AimRadius
        
        if AimLoopConnection then
            AimLoopConnection:Disconnect()
        end
        
        AimLoopConnection = RunService.RenderStepped:Connect(function(deltaTime)
            if IsAimEnabled then
                UpdateAimCirclePosition()
                
                local target = FindBestTarget()
                if target and target.Character and target.Character:FindFirstChild(AimPart) then
                    CurrentTarget = target
                    
                    local predictedPosition = GetPredictedPosition(target, deltaTime)
                    if predictedPosition then
                        AimAt(predictedPosition)
                    end
                    
                    HighlightTarget(target)
                else
                    CurrentTarget = nil
                    ClearAllHighlights()
                end
                

                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid and humanoid.Parent and humanoid.MoveDirection.Magnitude > 0 then
                    character:TranslateBy(humanoid.MoveDirection * SpeedMultiplier / 10)
                end
            end
        end)
        
        WindUI:Notify({
            Title = "WXè‡ªç„",
            Content = "é€Ÿåº¦ä¿®æ”¹å·²å¼€å¯",
            Icon = "zap",
            Duration = 2
        })
    elseif SpeedConnection then
        SpeedConnection:Disconnect()
        SpeedConnection = nil
        SpeedEnabled = false
        
        WindUI:Notify({
            Title = "WXè‡ªç„",
            Content = "é€Ÿåº¦ä¿®æ”¹å·²å…³é—­",
            Icon = "zap-off",
            Duration = 2
        })
    end
end

local function EnableInfiniteJump()
    game:GetService("UserInputService").JumpRequest:connect(function()
        game:GetService("Players").LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end)
    
    WindUI:Notify({
        Title = "WXè‡ªç„",
        Content = "æ— é™è·³è·ƒå·²å¯ç”¨",
        Icon = "chevrons-up",
        Duration = 2
    })
end

-- ==================== å…¬å‘Šé¡µé¢ ====================
local Paragraph1 = TabHandles.WX1:Paragraph({
    Title = "WXä½œè€…:åº…éŸ·ï¼Œå…è´¹æ±‰åŒ–",
    Desc = "ååŠ©è€…:ADF(FLOKIV2) ,æ–©è¿‡å¤©èŠ±æ¿, æ²™è®°",
    Thumbnail = "rbxassetid://",
    ThumbnailSize = 28,
})
local Paragraph2 = TabHandles.WX1:Paragraph({
    Title = "WXè„šæœ¬ç‰¹åˆ«æ¬¢è¿æ‚¨ä½¿ç”¨",
    Desc = "å¦‚æœä½ ç©æ­¤è„šæœ¬è¢«å°äº† æˆ–è€…æœåŠ¡å™¨è¢«å°äº†æˆ‘ä»¬æ¦‚ä¸è´Ÿè´£",
    ImageSize = 42,
    ThumbnailSize = 120,
})
local Paragraph1 = TabHandles.WX1:Paragraph({
    Title = "æ›´æ–°æ—¥å¿—1",
    Desc = "åŠ äº†é”»é€ æ±‰åŒ–",
    Image = "rbxassetid://",
    ImageSize = 42,
    Thumbnail = "rbxassetid://118776038727192",
    ThumbnailSize = 120,
})
local Paragraph3 = TabHandles.WX1:Paragraph({
    Title = "WXæ›´æ–°æ—¥å¿—2",
    Desc = "åŠ äº†é€šç”¨è‡ªç„",
    ImageSize = 42,
    ThumbnailSize = 120,
})
--ä½ çš„ç¾¤å·
local Paragraph4 = TabHandles.WX1:Paragraph({
    Title = "å¤åˆ¶ä¸»ç¾¤",
    Desc = "QQä¸»ç¾¤:1071851583",
    Buttons = {{
        Title = "å¤åˆ¶",
        Icon = "copy",
        Variant = "Primary",
        Callback = function()
            setclipboard("1071851583")
            local Sound = Instance.new("Sound", game:GetService("SoundService"))
            Sound.SoundId = "rbxassetid://138820873376530"
            Sound:Play()
            WindUI:Notify({
                Title = "WXï¼š",
                Content = "å·²æˆåŠŸå¤åˆ¶ï¼",
                Icon = "bell",
                IconThemed = true,
                Duration = 5
            })
        end
    }}
})

-- ==================== é€šç”¨åŠŸèƒ½é¡µé¢ ====================
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local JumpEnabled = false
local jumpConnection

local function getHumanoid()
    local char = game.Players.LocalPlayer.Character
    return char and char:FindFirstChildOfClass("Humanoid") or nil
end

-- ç§»åŠ¨é€Ÿåº¦æ»‘å—
TabHandles.WX2:Slider({
    Title = "ç§»åŠ¨é€Ÿåº¦",
    Desc = "è°ƒèŠ‚è§’è‰²ç§»åŠ¨é€Ÿåº¦ï¼ˆ1-500ï¼‰",
    Value = {
        Min = 1,
        Max = 500,
        Default = getHumanoid() and getHumanoid().WalkSpeed or 16
    },
    Step = 1,
    Callback = function(value)
        local humanoid = getHumanoid()
        if humanoid then
            humanoid.WalkSpeed = tonumber(value)
        end
    end
})

-- è·³è·ƒé«˜åº¦æ»‘å—
TabHandles.WX2:Slider({
    Title = "è·³è·ƒé«˜åº¦",
    Desc = "è°ƒèŠ‚è§’è‰²è·³è·ƒåŠ›åº¦ï¼ˆ1-500ï¼‰",
    Value = {
        Min = 1,
        Max = 500,
        Default = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid") and game.Players.LocalPlayer.Character.Humanoid.JumpPower or 50
    },
    Step = 1,
    Callback = function(value)
        local plr = game.Players.LocalPlayer
        local char = plr.Character or plr.CharacterAdded:Wait()
        local humanoid = char:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.JumpPower = tonumber(value)
            humanoid.UseJumpPower = true
        end
    end
})
-- é‡åŠ›è®¾ç½®æ»‘å—
TabHandles.WX2:Slider({
    Title = "é‡åŠ›è®¾ç½®",
    Desc = "è°ƒèŠ‚ä¸–ç•Œé‡åŠ›å¤§å°ï¼ˆ1-500ï¼‰",
    Value = {
        Min = 1,
        Max = 500,
        Default = Workspace.Gravity
    },
    Step = 1,
    Callback = function(value)
        Workspace.Gravity = tonumber(value)
    end
})

-- æ— é™è·³è·ƒå¼€å…³
TabHandles.WX2:Toggle({
    Title = "å¯ç”¨æ— é™è·³è·ƒ",
    Desc = "å¼€å¯åå¯ç©ºä¸­è¿ç»­è·³è·ƒ",
    Value = false,
    Callback = function(state)
        JumpEnabled = state
        if state then
            WindUI:Notify({
                Title = "åŠŸèƒ½å·²å¯ç”¨",
                Content = "æ— é™è·³è·ƒå·²å¼€å¯",
                Icon = "check-circle",
                Color = Color3.fromHex("#30ff6a"),
                Duration = 2
            })
        else
            WindUI:Notify({
                Title = "åŠŸèƒ½å·²å…³é—­",
                Content = "æ— é™è·³è·ƒå·²ç¦ç”¨",
                Icon = "x-circle",
                Color = Color3.fromHex("#ff3030"),
                Duration = 2
            })
        end
        if jumpConnection then jumpConnection:Disconnect() end
        if state then
            jumpConnection = UserInputService.JumpRequest:Connect(function()
                local success, humanoid = pcall(getHumanoid)
                if success and humanoid and humanoid.Health > 0 then
                    humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                end
            end)
        end
    end
})

local Paragraph5 = TabHandles.WX1:Paragraph({
    Title = "å¤åˆ¶ç”¨æˆ·ID",
    Desc = "ç‚¹å‡»æŒ‰é’®å¤åˆ¶å½“å‰è´¦å·ID",
    Buttons = {{
        Title = "å¤åˆ¶",
        Icon = "copy",
        Variant = "Primary",
        Callback = function()
            setclipboard(tostring(game:GetService("Players").LocalPlayer.UserId))
            local Sound = Instance.new("Sound", game:GetService("SoundService"))
            Sound.SoundId = "rbxassetid://138820873376530"
            Sound:Play()
            WindUI:Notify({
                Title = "WXï¼š",
                Content = "å·²æˆåŠŸå¤åˆ¶ç”¨æˆ·IDï¼",
                Icon = "bell",
                IconThemed = true,
                Duration = 5
            })
        end
    }}
})

local Paragraph6 = TabHandles.WX1:Paragraph({
    Title = "å¤åˆ¶æœåŠ¡å™¨åç§°",
    Desc = "ç‚¹å‡»æŒ‰é’®å¤åˆ¶å½“å‰æœåŠ¡å™¨åç§°",
    Buttons = {{
        Title = "å¤åˆ¶",
        Icon = "copy",
        Variant = "Primary",
        Callback = function()
            local placeName = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
            setclipboard(placeName)
            local Sound = Instance.new("Sound", game:GetService("SoundService"))
            Sound.SoundId = "rbxassetid://138820873376530"
            Sound:Play()
            WindUI:Notify({
                Title = "WXï¼š",
                Content = "å·²æˆåŠŸå¤åˆ¶æœåŠ¡å™¨åç§°ï¼",
                Icon = "bell",
                IconThemed = true,
                Duration = 5
            })
        end
    }}
})

local Paragraph7 = TabHandles.WX1:Paragraph({
    Title = "å¤åˆ¶æ³¨å†Œæ—¶é—´",
    Desc = "ç‚¹å‡»æŒ‰é’®å¤åˆ¶è´¦å·æ³¨å†Œå¤©æ•°",
    Buttons = {{
        Title = "å¤åˆ¶",
        Icon = "copy",
        Variant = "Primary",
        Callback = function()
            local accountAge = tostring(game:GetService("Players").LocalPlayer.AccountAge) .. " å¤©"
            setclipboard(accountAge)
            local Sound = Instance.new("Sound", game:GetService("SoundService"))
            Sound.SoundId = "rbxassetid://138820873376530"
            Sound:Play()
            WindUI:Notify({
                Title = "WXï¼š",
                Content = "å·²æˆåŠŸå¤åˆ¶æ³¨å†Œæ—¶é—´ï¼",
                Icon = "bell",
                IconThemed = true,
                Duration = 5
            })
        end
    }}
})

 --å¼€å…³åŠŸèƒ½èƒ½å…³é—­
local Toggle1 = TabHandles.WX2:Toggle({
    Title = "å¤œè§†åŠŸèƒ½", 
    Value = false, 
    Callback = function(Value)
        if Value then
            game.Lighting.Ambient = Color3.new(1, 1, 1)
        else
            game.Lighting.Ambient = Color3.new(0, 0, 0)
        end
        WindUI:Notify({
            Title = "WX",
            Content = Value and "å·²å¼€å¯" or "å·²å…³é—­",
            Duration = 3,
            Icon = "layout-grid",
        })
    end
})

-- ==================== è‡ªç„ç³»ç»Ÿé¡µé¢ ====================
-- è‡ªç„è®¾ç½®åŒºåŸŸ
local AimSection1 = TabHandles.WX3:Section({Title = "è‡ªç„è®¾ç½®"})

AimSection1:Toggle({
    Title = "è‡ªç„å¼€å…³",
    Desc = "å¼€å¯/å…³é—­è‡ªç„åŠŸèƒ½",
    Value = false,
    Callback = function(value)
        ToggleAim(value)
    end
})

AimSection1:Toggle({
    Title = "é¢„æµ‹è‡ªç„",
    Desc = "æ ¹æ®ç›®æ ‡ç§»åŠ¨é¢„æµ‹ç„å‡†ä½ç½®",
    Value = false,
    Callback = function(value)
        UsePrediction = value
    end
})

AimSection1:Toggle({
    Title = "ä¼˜å…ˆæœ€ä½è¡€é‡",
    Desc = "ä¼˜å…ˆç„å‡†è¡€é‡æœ€ä½çš„ç©å®¶",
    Value = false,
    Callback = function(value)
        TargetLowestHealth = value
    end
})

AimSection1:Slider({
    Title = "è‡ªç„åœˆå¤§å°",
    Desc = "è°ƒæ•´è‡ªç„è¯†åˆ«èŒƒå›´",
    Value = {
        Min = 1,
        Max = 600,
        Default = 50,
    },
    Step = 1,
    Callback = function(value)
        AimRadius = value
        if IsAimEnabled then
            AimCircle.Radius = AimRadius
        end
    end
})

AimSection1:Slider({
    Title = "è‡ªç„åœˆçº¿å®½",
    Desc = "è°ƒæ•´è‡ªç„åœˆçº¿æ¡ç²—ç»†",
    Value = {
        Min = 1,
        Max = 10,
        Default = 2,
    },
    Step = 1,
    Callback = function(value)
        AimCircle.Thickness = value
    end
})

-- ç„å‡†éƒ¨ä½é€‰æ‹©
local AimPartOptions = {
    ["å¤´éƒ¨"] = "Head",
    ["èº¯å¹²"] = "UpperTorso",
    ["å·¦æ‰‹"] = "LeftHand",
    ["å³æ‰‹"] = "RightHand",
    ["å·¦è„š"] = "LeftFoot",
    ["å³è„š"] = "RightFoot"
}

AimSection1:Dropdown({
    Title = "ç„å‡†éƒ¨ä½",
    Desc = "é€‰æ‹©è‡ªç„ç„å‡†çš„èº«ä½“éƒ¨ä½",
    Values = {"å¤´éƒ¨", "èº¯å¹²", "å·¦æ‰‹", "å³æ‰‹", "å·¦è„š", "å³è„š"},
    Value = "å¤´éƒ¨",
    Callback = function(selected)
        AimPart = AimPartOptions[selected]
    end
})

-- ç„å‡†åœˆé¢œè‰²é€‰æ‹©
local AimCircleColors = {
    ["çº¢è‰²"] = Color3.fromRGB(255, 0, 0),
    ["é»„è‰²"] = Color3.fromRGB(255, 255, 0),
    ["ç»¿è‰²"] = Color3.fromRGB(0, 255, 0),
    ["è“è‰²"] = Color3.fromRGB(0, 0, 255),
    ["ç´«è‰²"] = Color3.fromRGB(128, 0, 128),
    ["æ©™è‰²"] = Color3.fromRGB(255, 165, 0),
    ["ç™½è‰²"] = Color3.fromRGB(255, 255, 255)
}

AimSection1:Dropdown({
    Title = "è‡ªç„åœˆé¢œè‰²",
    Desc = "é€‰æ‹©è‡ªç„åœˆæ˜¾ç¤ºé¢œè‰²",
    Values = {"çº¢è‰²", "é»„è‰²", "ç»¿è‰²", "è“è‰²", "ç´«è‰²", "æ©™è‰²", "ç™½è‰²"},
    Value = "ç»¿è‰²",  -- âœ… æ”¹ä¸ºç»¿è‰²
    Callback = function(selected)
        AimCircle.Color = AimCircleColors[selected]
    end
})

AimSection1:Divider()

AimSection1:Toggle({
    Title = "å¿½ç•¥é˜Ÿå‹",
    Desc = "ä¸ç„å‡†åŒä¸€é˜Ÿä¼çš„ç©å®¶",
    Value = false,
    Callback = function(value)
        IgnoreTeam = value
    end
})

AimSection1:Toggle({
    Title = "å­˜æ´»æ£€æŸ¥",
    Desc = "åªç„å‡†å­˜æ´»çš„ç©å®¶",
    Value = false,
    Callback = function(value)
        CheckAlive = value
    end
})

AimSection1:Slider({
    Title = "é¢„æµ‹ç³»æ•°",
    Desc = "è°ƒæ•´è‡ªç„é¢„æµ‹çš„å¼ºåº¦",
    Value = {
        Min = 1,
        Max = 30,
        Default = 12,
    },
    Step = 1,
    Callback = function(value)
        PredictionScale = value / 10
    end
})

AimSection1:Toggle({
    Title = "å¢™ä½“æ£€æŸ¥",
    Desc = "åªç„å‡†å¯è§çš„ç©å®¶",
    Value = false,
    Callback = function(value)
        WallCheck = value
    end
})

-- ESPé€è§†ç³»ç»ŸåŒºåŸŸ
local AimSection2 = TabHandles.WX3:Section({Title = "é€è§†è®¾ç½®"})

local ESPColors = {
    ["ç™½è‰²"] = Color3.fromRGB(255, 255, 255),
    ["é’è‰²"] = Color3.fromRGB(0, 255, 255),
    ["è“è‰²"] = Color3.fromRGB(0, 0, 255),
    ["ç´«è‰²"] = Color3.fromRGB(128, 0, 128),
    ["é»„è‰²"] = Color3.fromRGB(255, 255, 0),
    ["ç»¿è‰²"] = Color3.fromRGB(0, 255, 0),
    ["çº¢è‰²"] = Color3.fromRGB(255, 0, 0)
}

AimSection2:Toggle({
    Title = "é€è§†æ‰€æœ‰ç©å®¶",
    Desc = "æ˜¾ç¤ºæ‰€æœ‰ç©å®¶çš„è½®å»“",
    Value = false,
    Callback = function(value)
        ToggleESP(value)
    end
})

AimSection2:Dropdown({
    Title = "é€è§†é¢œè‰²",
    Desc = "é€‰æ‹©é€è§†æ˜¾ç¤ºé¢œè‰²",
    Values = {"ç™½è‰²", "é’è‰²", "è“è‰²", "ç´«è‰²", "é»„è‰²", "ç»¿è‰²", "çº¢è‰²"},
    Value = "ç™½è‰²",
    Callback = function(selected)
        if not RainbowESP then
            SetESPColor(ESPColors[selected])
        end
    end
})

AimSection2:Toggle({
    Title = "å½©è™¹è‰²é€è§†",
    Desc = "å¯ç”¨ä¸ƒå½©é—ªçƒé€è§†æ•ˆæœ",
    Value = false,
    Callback = function(value)
        ToggleRainbowESP(value)
    end
})

AimSection2:Toggle({
    Title = "æ˜¾ç¤ºç©å®¶è¡€æ¡",
    Desc = "æ˜¾ç¤ºç©å®¶åå­—å’Œè¡€é‡ä¿¡æ¯",
    Value = false,
    Callback = function(value)
        ToggleHealthbars(value)
    end
})

-- ç§»åŠ¨ä¿®æ”¹ç³»ç»ŸåŒºåŸŸ
local AimSection3 = TabHandles.WX3:Section({Title = "ç§»åŠ¨è®¾ç½®"})

AimSection3:Toggle({
    Title = "é€Ÿåº¦ä¿®æ”¹",
    Desc = "ä¿®æ”¹è§’è‰²ç§»åŠ¨é€Ÿåº¦",
    Value = false,
    Callback = function(value)
        ToggleSpeed(value)
    end
})

AimSection3:Slider({
    Title = "é€Ÿåº¦å€æ•°",
    Desc = "è®¾ç½®ç§»åŠ¨é€Ÿåº¦çš„å€ç‡",
    Value = {
        Min = 1,
        Max = 1000,
        Default = 1,
    },
    Step = 1,
    Callback = function(value)
        SpeedMultiplier = value
    end
})

AimSection3:Button({
    Title = "å¯ç”¨æ— é™è·³è·ƒ",
    Desc = "å¯ç”¨æ— é™è·³è·ƒåŠŸèƒ½",
    Callback = function()
        EnableInfiniteJump()
    end
})

-- åˆå§‹åŒ–ESPå’Œè¡€æ¡
UpdateAllESP()
UpdateAllHealthbars()

-- ==================== é€šç”¨åŠŸèƒ½ç»§ç»­ ====================
local Button2 = TabHandles.WX2:Button({
    Title = "é£è¡Œ",
    Desc = "é£è¡ŒåŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://pastefy.app/tvJQcwGt/raw"))()
        
        WindUI:Notify({
            Title = "WX",
            Content = "åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})

TabHandles.WX2:Toggle({
Title = "ç©¿å¢™(å¯ç”¨)",
Desc = "å¼€å¯åå¯æ— è§†ç¢°æ’ç©¿è¿‡ç‰©ä½“",
Value = false,
Callback = function(NC)
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
Clipon = NC and true or false
Stepped = game:GetService("RunService").Stepped:Connect(function()
if Clipon then
for a, b in pairs(Workspace:GetChildren()) do
if b.Name == Players.LocalPlayer.Name then
for i, v in pairs(Workspace[Players.LocalPlayer.Name]:GetChildren()) do
if v:IsA("BasePart") then
v.CanCollide = false
end
end
end
end
else
Stepped:Disconnect()
end
end)
end
})
local Button3 = TabHandles.WX2:Button({
    Title = "æ— å¤´åŠ æ–­è…¿ç¾åŒ–",
    Desc = "",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Permanent-Headless-And-korblox-Script-4140"))()
        
        WindUI:Notify({
            Title = "æ­£åœ¨åŠ è½½WXç¾åŒ–",
            Content = "åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button4 = TabHandles.WX2:Button({
    Title = "é£è½¦",
    Desc = "é£è½¦åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://pastefy.app/0dZzBUiL/raw"))()
        
        WindUI:Notify({
            Title = "æ­£åœ¨åŠ è½½WXé£è½¦",
            Content = "åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button5 = TabHandles.WX2:Button({
    Title = "æœ€é«˜ç”»è´¨",
    Desc = "å¯ç”¨æœ€é«˜ç”»è´¨åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/jHBfJYmS"))()
        WindUI:Notify({
            Title = "WX",
            Content = "æœ€é«˜ç”»è´¨åŠŸèƒ½åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})

local Button6 = TabHandles.WX2:Button({
    Title = "å…‰å½±v4",
    Desc = "å¯ç”¨å…‰å½±v4åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/MZEEN2424/Graphics/main/Graphics.xml"))()
        WindUI:Notify({
            Title = "WX",
            Content = "å…‰å½±v4åŠŸèƒ½åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})

local Button7 = TabHandles.WX2:Button({
    Title = "RTXé«˜ä»¿",
    Desc = "å¯ç”¨RTXé«˜ä»¿åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet('https://pastebin.com/raw/Bkf0BJb3'))()
        WindUI:Notify({
            Title = "WX",
            Content = "RTXé«˜ä»¿åŠŸèƒ½åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})

local Button8 = TabHandles.WX2:Button({
    Title = "å…‰å½±æ·±",
    Desc = "å¯ç”¨å…‰å½±æ·±åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/MZEEN2424/Graphics/main/Graphics.xml"))()
        WindUI:Notify({
            Title = "WX",
            Content = "å…‰å½±æ·±åŠŸèƒ½åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})

local Button9 = TabHandles.WX2:Button({
    Title = "å…‰å½±æµ…",
    Desc = "å¯ç”¨å…‰å½±æµ…åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/jHBfJYmS"))()
        WindUI:Notify({
            Title = "WX",
            Content = "å…‰å½±æµ…åŠŸèƒ½åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button10 = TabHandles.WX2:Button({
    Title = "æ—‹è½¬ç”©é£",
    Desc = "å¯ç”¨æ—‹è½¬ç”©é£åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/dingding123hhh/tt/main/%E6%97%8B%E8%BD%AC.lua"))()
        WindUI:Notify({
            Title = "WX",
            Content = "æ—‹è½¬ç”©é£åŠŸèƒ½åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button14 = TabHandles.WX2:Button({
    Title = "é›¶ä»¶ç ´åè€…v2",
    Desc = "å¯ç”¨é›¶ä»¶ç ´åè€…v2åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/cytj777i/-/main/é›¶ä»¶ç ´åè€…v2"))()
        WindUI:Notify({
            Title = "WX",
            Content = "é›¶ä»¶ç ´åè€…v2åŠŸèƒ½åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})

local Button15 = TabHandles.WX2:Button({
    Title = "é»‘æ´v5",
    Desc = "å¯ç”¨é»‘æ´v5åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/DN0upqNm"))()
        WindUI:Notify({
            Title = "WX",
            Content = "é»‘æ´v5åŠŸèƒ½åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})

local Button16 = TabHandles.WX2:Button({
    Title = "é»‘æ´v6",
    Desc = "å¯ç”¨é»‘æ´v6åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/chesslovers69/Super-ring-parts-v6/refs/heads/main/Bylukaslol"))()
        WindUI:Notify({
            Title = "WX",
            Content = "é»‘æ´v6åŠŸèƒ½åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})

local Button17 = TabHandles.WX2:Button({
    Title = "é»‘æ´v7",
    Desc = "å¯ç”¨é»‘æ´v7åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/QYUALL7N"))()
        WindUI:Notify({
            Title = "WX",
            Content = "é»‘æ´v7åŠŸèƒ½åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button18 = TabHandles.WX2:Button({
    Title = "äººç‰©èºæ—‹ä¸Šå¤©",
    Desc = "å¯ç”¨äººç‰©èºæ—‹ä¸Šå¤©åŠŸèƒ½",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://pastefy.app/xV1T3PAi/raw"))()
        WindUI:Notify({
            Title = "WX",
            Content = "äººç‰©èºæ—‹ä¸Šå¤©èƒ½åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button19 = TabHandles.WX7:Button({
    Title = "XK HUB",
    Desc = "å²ä¸Šæœ€å¥½ç”¨çš„å…è´¹è„šæœ¬",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet(('https://github.com/devslopo/DVES/raw/main/XK%20Hub')))()
        WindUI:Notify({
            Title = "WX",
            Content = "XK HUBåŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button20 = TabHandles.WX7:Button({
    Title = "çš®è„šæœ¬",
    Desc = "å…è´¹è„šæœ¬",
    Locked = false,
    Callback = function()
        getgenv().XiaoPi="çš®è„šæœ¬QQç¾¤1002100032" loadstring(game:HttpGet("https://raw.githubusercontent.com/xiaopi77/xiaopi77/main/QQ1002100032-Roblox-Pi-script.lua"))()
        WindUI:Notify({
            Title = "WX",
            Content = "çš®è„šæœ¬åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button21 = TabHandles.WX7:Button({
    Title = "æ²™è„šæœ¬",
    Desc = "å¾ˆå¥½ç”¨çš„å…è´¹è„šæœ¬ï¼Œæ²™è®°åˆ¶ä½œ",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/114514lzkill/ShaHUB/refs/heads/main/ShaHUB"))()
        WindUI:Notify({
            Title = "WX",
            Content = "æ²™è„šæœ¬åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button22 = TabHandles.WX7:Button({
    Title = "è„šä¸æœ¬",
    Desc = "å¡å¯†jyb",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/FnYpMeAk"))()
        WindUI:Notify({
            Title = "WX",
            Content = "å¡å¯†jyb",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button23 = TabHandles.WX7:Button({
    Title = "WUè„šæœ¬ç ´è§£ç‰ˆ",
    Desc = "æ— éœ€å¡å¯†ï¼Œç ´è§£ç‰ˆ",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/WUSCRIPT/WU-Script/d32b223a23ad84ef7c295656bff860e134eb8a90/77-obfuscated.lua"))()
        WindUI:Notify({
            Title = "WX",
            Content = "WUè„šæœ¬åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button24 = TabHandles.WX6:Button({
    Title = "99å¤œåˆ·é’»çŸ³",
    Desc = "å¯å¦ä½¿ç”¨æœªç»æµ‹è¯•ï¼Œç”±å›½äººåˆ¶ä½œ",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/TheqopThe/robax/refs/heads/main/jumpscare.lua"))()
        WindUI:Notify({
            Title = "WX",
            Content = "99å¤œåˆ·é’»çŸ³åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button25 = TabHandles.WX6:Button({
    Title = "æ­»é“è½¨è„šæœ¬",
    Desc = "æœªæµ‹è¯•å¯å¦ä½¿ç”¨",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/e1cfd93b113a79773d93251b61af1e2f.lua"))()
        WindUI:Notify({
            Title = "WX",
            Content = "æ­»é“è½¨è„šæœ¬åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button26 = TabHandles.WX6:Button({
    Title = "æ­»äº¡é“è½¨åˆ·å€ºåˆ¸",
    Desc = "å…¨è‡ªåŠ¨",
    Locked = false,
    Callback = function()
        getgenv().AutoExecute = true(loadstring or load)(game:HttpGet("https://raw.githubusercontent.com/hungquan99/HungHUB/main/loader.lua"))()
        WindUI:Notify({
            Title = "WX",
            Content = "æ­»äº¡é“è½¨åˆ·å€ºå·åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button27 = TabHandles.WX6:Button({
    Title = "æœ€åšå¼ºçš„æˆ˜åœºåƒåœ¾æ¡¶è§’è‰²",
    Desc = "ä»»æ„è§’è‰²å³å¯æ‰§è¡Œï¼Œæ­»äº¡åéœ€é‡æ–°æ‰§è¡Œ",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/yes1nt/yes/refs/heads/main/Trashcan%20Man", true))()
        WindUI:Notify({
            Title = "WX",
            Content = "æœ€åšå¼ºçš„æˆ˜åœºåƒåœ¾æ¡¶åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button28 = TabHandles.WX6:Button({
    Title = "æœ€åšå¼ºçš„æˆ˜åœºç«è½¦å¤´",
    Desc = "éœ€é¥¿ç‹¼è§’è‰²æ‰§è¡Œ",
    Locked = false,
    Callback = function()
        getgenv().settings = {
    ["morph"] = {
        ["enabled"] = false,
        ["dontchangeskincolor"] = false,
    },
    ["ult_forcewalkspeed"] = true, -- forces walkspeed even if set to 0
    ["ult_walkspeed"] = 64, -- how fast you walk in ult
    ["tp_duration"] = 0.15 -- how long it takes to tp
} 

loadstring(game:HttpGet("https://raw.githubusercontent.com/skibiditoiletfan2007/ATrainSounds/refs/heads/main/ATrain.lua"))()
        WindUI:Notify({
            Title = "WX",
            Content = "æœ€åšå¼ºçš„æˆ˜åœºç«è½¦å¤´åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button29 = TabHandles.WX6:Button({
    Title = "æœ€åšå¼ºçš„æˆ˜åœºåŠ¨ä½œè„šæœ¬",
    Desc = "åˆ«äººçœ‹ä¸è§ï¼Œçº¯è‡ªå·±è£…å¸…ç”¨",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/HellishAgem/HellishMovesetCutscene/refs/heads/main/Protected_6748082827088148.txt"))()
        WindUI:Notify({
            Title = "WX",
            Content = "æœ€åšå¼ºçš„æˆ˜åœºåŠ¨ä½œåŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button30 = TabHandles.WX2:Button({
    Title = "æ— æ•Œå°‘ä¾ é£è¡Œ",
    Desc = "ä»…æ”¯æŒR15ä½“å‹ï¼ŒéR15ä½“å‹æ— æ³•ä½¿ç”¨",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Invinicible-Flight-R15-45414"))() 
        WindUI:Notify({
            Title = "WX",
            Content = "æ— æ•Œå°‘ä¾ é£è¡ŒåŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button31 = TabHandles.WX6:Button({
    Title = "ä¿„äº¥ä¿„å·XA",
    Desc = "èƒ½ä¸èƒ½ç”¨ä¸ç¡®å®š",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/XingFork/Scripts/refs/heads/main/Ohio"))()
        WindUI:Notify({
            Title = "WX",
            Content = "XAä¿„äº¥ä¿„å·åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button32 = TabHandles.WX2:Button({
    Title = "é”»é€ 1",
    Desc = "æ‰€æœ‰é”»é€ çš„åŠ è½½çš„éƒ½æœ‰ç‚¹å¡ï¼Œä¸è¦åœ¨æ„  ",
    Locked = false,
    Callback = function()
loadstring(game:HttpGet("https://pastefy.app/hpo8mrBS/raw"))()
        WindUI:Notify({
            Title = "WX",
            Content = "é”»é€ åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button33 = TabHandles.WX2:Button({
    Title = "é”»é€ äºŒ",
    Desc = "æˆ‘æ±‰åŒ–çš„",
    Locked = false,
    Callback = function()
loadstring(game:HttpGet("https://pastefy.app/cqpwBBvX/raw"))() 
        WindUI:Notify({
            Title = "WX",
            Content = "é”»é€ åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
local Button34 = TabHandles.WX2:Button({
    Title = "é”»é€ ä¸‰",
    Desc = "æˆ‘æ±‰åŒ–çš„ ",
    Locked = false,
    Callback = function()
loadstring(game:HttpGet("https://pastefy.app/eEgLJA4f/raw"))()
        WindUI:Notify({
            Title = "WX",
            Content = "é”»é€ åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})

-- ==================== UIè®¾è‰²é¡µé¢ ====================
local Button1 = TabHandles.WX8:Button({
    Title = "è‡ªå®šä¹‰ç•Œé¢",
    Desc = "ä¸ªæ€§åŒ–æ‚¨çš„ä½“éªŒ",
    Image = "palette",
    ImageSize = 20,
    Color = "White"
})
local themes = {}
for themeName, _ in pairs(WindUI:GetThemes()) do
    table.insert(themes, themeName)
end
table.sort(themes)
local themeDropdown = TabHandles.WX8:Dropdown({
    Title = "ä¸»é¢˜é€‰æ‹©",
    Values = themes,
    Value = "Dark",
    Callback = function(theme)
        WindUI:SetTheme(theme)
        WindUI:Notify({
            Title = "WX",
            Content = "å·²åº”ç”¨"..theme.."ä¸»é¢˜",
            Icon = "palette",
            Duration = 2
        })
    end
})
local transparencySlider = TabHandles.WX8:Slider({
    Title = "ç•Œé¢é€æ˜åº¦",
    Value = { 
        Min = -2,
        Max = 1,
        Default = 0.2,
    },
    Step = 0.1,
    Callback = function(value)
        Window:ToggleTransparency(tonumber(value) > 0)
        WindUI.TransparencyValue = tonumber(value)
    end
})
TabHandles.WX8:Toggle({
    Title = "å¯ç”¨ç™½è‰²ä¸»é¢˜",
    Desc = "ä½¿ç”¨ç™½è‰²è°ƒä¸»é¢˜æ–¹æ¡ˆ",
    Value = true,
    Callback = function(state)
        WindUI:SetTheme(state and "Light" or "Dark")
        themeDropdown:Select(state and "Light" or "Dark")
        WindUI:Notify({
            Title = "WX",
            Content = state and "å·²å¯ç”¨ç™½è‰²ä¸»é¢˜" or "å·²å¯ç”¨é»‘è‰²ä¸»é¢˜",
            Duration = 2,
            Icon = "palette"
        })
    end
})
TabHandles.WX8:Button({
    Title = "åˆ›å»ºæ–°ä¸»é¢˜",
    Icon = "plus",
    Callback = function()
        Window:Dialog({
            Title = "åˆ›å»ºä¸»é¢˜",
            Content = "æ­¤åŠŸèƒ½å¾ˆå¿«å°±ä¼šæ¨å‡º",
            Buttons = {
                {
                    Title = "ç¡®è®¤",
                    Variant = "Primary"
                }
            }
        })
    end
})
TabHandles.WX8:Paragraph({
    Title = "é…ç½®ç®¡ç†",
    Desc = "ä¿å­˜ä½ çš„è®¾ç½®",
    Image = "save",
    ImageSize = 20,
    Color = "White"
})
local configName = "default"
local configFile = nil
local MyPlayerData = {
    name = "Player1",
    level = 1,
    inventory = { "sword", "shield", "potion" }
}
TabHandles.WX8:Input({
    Title = "é…ç½®åç§°",
    Value = configName,
    Callback = function(value)
        configName = value
    end
})
local ConfigManager = Window.ConfigManager
if ConfigManager then
    ConfigManager:Init(Window)
    
    TabHandles.WX8:Button({
        Title = "ä¿å­˜é…ç½®",
        Icon = "save",
        Variant = "Primary",
        Callback = function()
            configFile = ConfigManager:CreateConfig(configName)
            
            configFile:Register("featureToggle", Toggle1)
            configFile:Register("intensitySlider", Slider)
            configFile:Register("modeDropdown", themeDropdown)
            configFile:Register("themeDropdown", themeDropdown)
            configFile:Register("transparencySlider", transparencySlider)
            
            configFile:Set("playerData", MyPlayerData)
            configFile:Set("lastSave", os.date("%Y-%m-%d %H:%M:%S"))
            
            if configFile:Save() then
                WindUI:Notify({ 
                    Title = "ä¿å­˜é…ç½®", 
                    Content = "ä¿å­˜ä¸ºï¼š"..configName,
                    Icon = "check",
                    Duration = 3
                })
            else
                WindUI:Notify({ 
                    Title = "é”™è¯¯", 
                    Content = "ä¿å­˜å¤±è´¥",
                    Icon = "x",
                    Duration = 3
                })
            end
        end
    })
    TabHandles.WX8:Button({
        Title = "åŠ è½½é…ç½®",
        Icon = "folder",
        Callback = function()
            configFile = ConfigManager:CreateConfig(configName)
            local loadedData = configFile:Load()
            
            if loadedData then
                if loadedData.playerData then
                    MyPlayerData = loadedData.playerData
                end
                
                local lastSave = loadedData.lastSave or "Unknown"
                WindUI:Notify({ 
                    Title = "åŠ è½½é…ç½®", 
                    Content = "æ­£åœ¨åŠ è½½ï¼š"..configName.."\nä¸Šæ¬¡ä¿å­˜ï¼š"..lastSave,
                    Icon = "refresh-cw",
                    Duration = 5
                })
                
                local ButtonData = TabHandles.WX8:Button({
                    Title = "ç©å®¶æ•°æ®",
                    Desc = string.format("åå­—: %s\nç­‰çº§: %d\nåº“å­˜: %s", 
                        MyPlayerData.name, 
                        MyPlayerData.level, 
                        table.concat(MyPlayerData.inventory, ", "))
                })
            else
                WindUI:Notify({ 
                    Title = "é”™è¯¯", 
                    Content = "åŠ è½½å¤±è´¥",
                    Icon = "x",
                    Duration = 3
                })
            end
        end
    })
else
    TabHandles.WX8:Paragraph({
        Title = "é…ç½®ç®¡ç†ä¸å¯ç”¨",
        Desc = "æ­¤åŠŸèƒ½éœ€è¦é…ç½®ç®¡ç†",
        Image = "alert-triangle",
        ImageSize = 20,
        Color = "White"
    })
end

local Button = TabHandles.WX2:Button({
    Title = "è¸ç©ºè¡Œèµ°",
    Desc = "",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/114514lzkill/ShaHUB/refs/heads/main/ShaHUB"))()
        WindUI:Notify({
            Title = "WX",
            Content = "è¸ç©ºè¡Œèµ°åŠ è½½æˆåŠŸ",
            Duration = 3,
            Icon = "layout-grid",
        })        
    end
})
-- ç°åœ¨å¼€å§‹æ·»åŠ æä¾›çš„è„šæœ¬åŠŸèƒ½
local RunService = game:GetService("RunService")
local selectedPlayer = nil
local playerList = {}
local playerDropdown

-- æ·»åŠ åˆ†éš”æ®µè½
TabHandles.WX4:Paragraph({
    Title = "ç”©é£é¡µé¢",
    Desc = "ğŸ¤“ğŸ¤“ç”©é£ä»–ä»¬",
    Image = "users",
    ImageSize = 20
})

-- ç©å®¶é€‰æ‹©éƒ¨åˆ†
local playerSelectionParagraph = TabHandles.WX4:Paragraph({
    Title = "æ²¡ç”¨ï¼Œä¸è¦ç‚¹",
    Desc = "é€‰æ‹©ç©å®¶åœ¨æœ€ä¸‹é¢"
})

-- åˆ·æ–°ç©å®¶åˆ—è¡¨çš„å‡½æ•°
local function refreshPlayers()
    table.clear(playerList)
    for _, player in pairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer then
            table.insert(playerList, player.Name)
        end
    end
    -- å¦‚æœå·²ç»æœ‰ä¸‹æ‹‰æ¡†ï¼Œæ›´æ–°å®ƒ
    if playerDropdown then
        -- WindUIå¯èƒ½éœ€è¦ä¸åŒçš„æ–¹å¼æ›´æ–°ä¸‹æ‹‰æ¡†
        -- è¿™é‡Œæˆ‘ä»¬é‡æ–°åˆ›å»ºä¸‹æ‹‰æ¡†
        playerDropdown = TabHandles.WX4:Dropdown({
            Title = "é€‰æ‹©ç©å®¶çš„åç§°",
            Values = playerList,
            Value = playerList[1] or "",
            Callback = function(selected)
                selectedPlayer = game.Players:FindFirstChild(selected)
                if selectedPlayer then
                    WindUI:Notify({
                        Title = "WX",
                        Content = "å·²é€‰æ‹©ç©å®¶: " .. selectedPlayer.Name,
                        Duration = 3,
                        Icon = "user"
                    })
                end
            end
        })
    end
end

-- åˆå§‹åˆ›å»ºä¸‹æ‹‰æ¡†
playerDropdown = TabHandles.WX4:Dropdown({
    Title = "é€‰æ‹©ç©å®¶çš„åç§°",
    Values = playerList,
    Value = "",
    Callback = function(selected)
        selectedPlayer = game.Players:FindFirstChild(selected)
        if selectedPlayer then
            WindUI:Notify({
                Title = "WX",
                Content = "å·²é€‰æ‹©ç©å®¶: " .. selectedPlayer.Name,
                Duration = 3,
                Icon = "user"
            })
        end
    end
})

-- åˆ·æ–°ç©å®¶åˆ—è¡¨æŒ‰é’®
TabHandles.WX4:Button({
    Title = "åˆ·æ–°ç©å®¶åˆ—è¡¨",
    Desc = "åˆ·æ–°å½“å‰æ‰€æœ‰åœ¨çº¿ç©å®¶",
    Icon = "refresh-cw",
    Callback = function()
        refreshPlayers()
        WindUI:Notify({
            Title = "WX",
            Content = "ç©å®¶åˆ—è¡¨å·²åˆ·æ–°",
            Duration = 3,
            Icon = "check"
        })
    end
})

-- æŸ¥çœ‹ç©å®¶æŒ‰é’®
TabHandles.WX4:Button({
    Title = "æŸ¥çœ‹é€‰ä¸­ç©å®¶",
    Desc = "å°†è§†è§’åˆ‡æ¢åˆ°é€‰ä¸­çš„ç©å®¶",
    Icon = "eye",
    Callback = function()
        if selectedPlayer and selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("Humanoid") then
            game.Workspace.CurrentCamera.CameraSubject = selectedPlayer.Character.Humanoid
            WindUI:Notify({
                Title = "WX",
                Content = "æ­£åœ¨æŸ¥çœ‹: " .. selectedPlayer.Name,
                Duration = 3,
                Icon = "eye"
            })
        else
            WindUI:Notify({
                Title = "WX",
                Content = "è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆç©å®¶",
                Duration = 3,
                Icon = "alert-triangle"
            })
        end
    end
})

-- åœæ­¢æŸ¥çœ‹æŒ‰é’®
TabHandles.WX4:Button({
    Title = "åœæ­¢æŸ¥çœ‹",
    Desc = "å°†è§†è§’åˆ‡å›è‡ªå·±çš„è§’è‰²",
    Icon = "eye-off",
    Callback = function()
        local localPlayer = game.Players.LocalPlayer
        if localPlayer.Character and localPlayer.Character:FindFirstChild("Humanoid") then
            game.Workspace.CurrentCamera.CameraSubject = localPlayer.Character.Humanoid
            WindUI:Notify({
                Title = "WX",
                Content = "å·²åˆ‡å›è‡ªå·±çš„è§†è§’",
                Duration = 3,
                Icon = "eye-off"
            })
        end
    end
})

-- ä¼ é€åŠŸèƒ½éƒ¨åˆ†
TabHandles.WX4:Paragraph({
    Title = "ä¼ é€åŠŸèƒ½",
    Desc = "ä¼ é€ç›¸å…³åŠŸèƒ½",
    Image = "move",
    ImageSize = 20
})

-- ä¼ é€’åˆ°ç©å®¶æ—è¾¹
TabHandles.WX4:Button({
    Title = "ä¼ é€åˆ°ç©å®¶æ—è¾¹",
    Desc = "ä¼ é€åˆ°é€‰ä¸­ç©å®¶çš„æ—è¾¹",
    Icon = "navigation",
    Callback = function()
        if selectedPlayer and selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local targetPos = selectedPlayer.Character.HumanoidRootPart.Position
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(targetPos + Vector3.new(3, 0, 3))
            WindUI:Notify({
                Title = "WX",
                Content = "å·²ä¼ é€åˆ° " .. selectedPlayer.Name .. " æ—è¾¹",
                Duration = 3,
                Icon = "navigation"
            })
        else
            WindUI:Notify({
                Title = "WX",
                Content = "è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆç©å®¶",
                Duration = 3,
                Icon = "alert-triangle"

    Desc = "å¸äººã€ç”©é£ç­‰é«˜çº§åŠŸèƒ½",
    Image = "wind",
    ImageSize = 20
})

-- ç”©é£ä¸€æ¬¡é€‰ä¸­çš„äºº
TabHandles.WX4:Button({

    Desc = "ç”©é£ä¸€æ¬¡é€‰ä¸­çš„ç©å®¶",
    Icon = "wind",
    Callback = function()
        local Player = game:GetService("Players").LocalPlayer
        local TargetPlayer = selectedPlayer
        if not TargetPlayer or TargetPlayer == Player then
            WindUI:Notify({
                Title = "WX",
                Content = "æ— ç©å®¶å¯ç”©é£",
                Duration = 3,
                Icon = "alert-triangle"
            })
            return
        end

        local Message = function(_Title, _Text, Time)
            WindUI:Notify({
                Title = _Title,
                Content = _Text,
                Duration = Time,
                Icon = "bell"
            })
        end

        local pid = game.PlaceId
        if pid == 189707 then
            local rs = game:GetService("RunService")
            local hb = rs.Heartbeat
            local rsd = rs.RenderStepped
            local lp = game.Players.LocalPlayer
            local z = Vector3.zero
            local function f(c)
                local r = c:WaitForChild("HumanoidRootPart")
                if r then
                    local con
                    con = hb:Connect(function()
                        if not r.Parent then
                            con:Disconnect()
                        end
                        local v = r.AssemblyLinearVelocity
                        r.AssemblyLinearVelocity = z
                        rsd:Wait()
                        r.AssemblyLinearVelocity = v
                    end)
                end
            end
            f(lp.Character)
            lp.CharacterAdded:Connect(f)
        end

        local SkidFling = function(Target)
            local Character = Player.Character
            local Humanoid = Character and Character:FindFirstChildOfClass("Humanoid")
            local RootPart = Humanoid and Humanoid.RootPart
            local TCharacter = Target.Character
            local THumanoid = TCharacter and TCharacter:FindFirstChildOfClass("Humanoid")
            local TRootPart = THumanoid and THumanoid.RootPart
            local THead = TCharacter and TCharacter:FindFirstChild("Head")
            local Accessory = TCharacter and TCharacter:FindFirstChildOfClass("Accessory")
            local Handle = Accessory and Accessory:FindFirstChild("Handle")

            if not (Character and Humanoid and RootPart and TCharacter and THumanoid) then
                return Message("WX", "ç©å®¶å·²è¶‹åŠ¿", 2)
            end
            if THumanoid.Sit then return Message("WX", "ç›®æ ‡å¤„äºåå§¿", 2) end
            if not TCharacter:FindFirstChildWhichIsA("BasePart") then return Message("WX", "ç©å®¶å·²è¶‹åŠ¿", 2) end

            if THead then
                workspace.CurrentCamera.CameraSubject = THead
            elseif Handle then
                workspace.CurrentCamera.CameraSubject = Handle
            else
                workspace.CurrentCamera.CameraSubject = THumanoid
            end

            if RootPart.Velocity.Magnitude < 50 then
                getgenv().OldPos = RootPart.CFrame
            end

            local FPos = function(BasePart, Pos, Ang)
                RootPart.CFrame = CFrame.new(BasePart.Position) * Pos * Ang
                Character:SetPrimaryPartCFrame(CFrame.new(BasePart.Position) * Pos * Ang)
                RootPart.Velocity = Vector3.new(9e7, 9e7 * 10, 9e7)
                RootPart.RotVelocity = Vector3.new(9e8, 9e8, 9e8)
            end

            local SFBasePart = function(BasePart)
                local TimeToWait = 2
                local Time = tick()
                local Angle = 0
                repeat
                    if RootPart and THumanoid then
                        if BasePart.Velocity.Magnitude < 50 then
                            Angle = Angle + 100
                            FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 0.95, CFrame.Angles(math.rad(Angle),0 ,0))
                            task.wait()
                            FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 0.95, CFrame.Angles(math.rad(Angle), 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(2.25, 1.5, -2.25) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 0.95, CFrame.Angles(math.rad(Angle), 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(-2.25, -1.5, 2.25) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 0.95, CFrame.Angles(math.rad(Angle), 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection,CFrame.Angles(math.rad(Angle), 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection,CFrame.Angles(math.rad(Angle), 0, 0))
                            task.wait()
                        else
                            FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(0, -1.5, -THumanoid.WalkSpeed), CFrame.Angles(0, 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                            task.wait()
                            
                            FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 0.95), CFrame.Angles(math.rad(90), 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(0, -1.5, -TRootPart.Velocity.Magnitude / 0.95), CFrame.Angles(0, 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 0.95), CFrame.Angles(math.rad(90), 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(math.rad(90), 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(0, -1.5 ,0), CFrame.Angles(math.rad(-90), 0, 0))
                            task.wait()
                            FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                            task.wait()
                        end
                    else
                        break
                    end
                until BasePart.Velocity.Magnitude > 500 or BasePart.Parent ~= Target.Character or Target.Parent ~= game:GetService("Players") or THumanoid.Sit or Humanoid.Health <= 0 or tick() > Time + TimeToWait
            end

            workspace.FallenPartsDestroyHeight = 0/0
            local BV = Instance.new("BodyVelocity")
            BV.Name = "EpixVel"
            BV.Parent = RootPart
            BV.Velocity = Vector3.new(9e8, 9e8, 9e8)
            BV.MaxForce = Vector3.new(1/0, 1/0, 1/0)
            Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, false)

            if TRootPart and THead then
                SFBasePart((TRootPart.CFrame.p - THead.CFrame.p).Magnitude > 5 and THead or TRootPart)
            elseif TRootPart then
                SFBasePart(TRootPart)
            elseif THead then
                SFBasePart(THead)
            elseif Handle then
                SFBasePart(Handle)
            else

                                FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection,CFrame.Angles(math.rad(Angle), 0, 0))
                                task.wait()
                            else
                                FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, -THumanoid.WalkSpeed), CFrame.Angles(0, 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                                task.wait()
                                
                                FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 0.95), CFrame.Angles(math.rad(90), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, -TRootPart.Velocity.Magnitude / 0.95), CFrame.Angles(0, 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 0.95), CFrame.Angles(math.rad(90), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(math.rad(90), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5 ,0), CFrame.Angles(math.rad(-90), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                                task.wait()
                            end
                        else
                            break
                        end
                    until BasePart.Velocity.Magnitude > 500 or BasePart.Parent ~= Target.Character or Target.Parent ~= game:GetService("Players") or THumanoid.Sit or Humanoid.Health <= 0 or tick() > Time + TimeToWait
                end
                
                workspace.FallenPartsDestroyHeight = 0/0
                local BV = Instance.new("BodyVelocity")
                BV.Name = "EpixVel"
                BV.Parent = RootPart
                BV.Velocity = Vector3.new(9e8, 9e8, 9e8)
                BV.MaxForce = Vector3.new(1/0, 1/0, 1/0)
                Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, false)
                
                if TRootPart and THead then
                    SFBasePart((TRootPart.CFrame.p - THead.CFrame.p).Magnitude > 5 and THead or TRootPart)
                elseif TRootPart then
                    SFBasePart(TRootPart)
                elseif THead then
                    SFBasePart(THead)
                elseif Handle then
                    SFBasePart(Handle)
                end
                
                BV:Destroy()
                Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, true)
                workspace.CurrentCamera.CameraSubject = Humanoid
                getgenv().FPDH = getgenv().FPDH or workspace.FallenPartsDestroyHeight
                
                repeat
                    RootPart.CFrame = getgenv().OldPos * CFrame.new(0, 0.5, 0)
                    Character:SetPrimaryPartCFrame(getgenv().OldPos * CFrame.new(0, 0.5, 0))
                    Humanoid:ChangeState("GettingUp")
                    table.foreach(Character:GetChildren(), function(_, x)
                        if x:IsA("BasePart") then x.Velocity, x.RotVelocity = Vector3.new(), Vector3.new() end
                    end)
                    task.wait()
                until (RootPart.Position - getgenv().OldPos.p).Magnitude < 25
                workspace.FallenPartsDestroyHeight = getgenv().FPDH
            end
            
            loopFlingConnection = RunService.Heartbeat:Connect(function()
                if loopFlingEnabled and selectedPlayer then
                    performFling()
                end
            end)
        else
            if loopFlingConnection then
                loopFlingConnection:Disconnect()
                loopFlingConnection = nil
            end
            WindUI:Notify({
                Title = "WX",
                Content = "é”å®šç”©é£å·²å…³é—­",
                Duration = 3,
                Icon = "x"
            })
        end
    end
})

-- ç”©é£æ‰€æœ‰äºº
TabHandles.WX4:Button({
    Title = "ç”©é£æ‰€æœ‰äºº",
    Desc = "ç”©é£æ‰€æœ‰åœ¨çº¿ç©å®¶",
    Icon = "users",
    Callback = function()
        local Targets = {"All"}
        local Players = game:GetService("Players")
        local Player = Players.LocalPlayer
        local AllBool = false
        local GetPlayer = function(Name)
            Name = Name:lower()
            if Name == "all" or Name == "others" then
                AllBool = true
                return
            elseif Name == "random" then
                local GetPlayers = Players:GetPlayers()
                if table.find(GetPlayers,Player) then table.remove(GetPlayers,table.find(GetPlayers,Player)) end
                return GetPlayers[math.random(#GetPlayers)]
            elseif Name ~= "random" and Name ~= "all" and Name ~= "others" then
                for _,x in next, Players:GetPlayers() do
                    if x ~= Player then
                        if x.Name:lower():match("^"..Name) then
                            return x;
                        elseif x.DisplayName:lower():match("^"..Name) then
                            return x;
                        end
                    end
                end
            else
                return
            end
        end
        
        local Message = function(_Title, _Text, Time)
            WindUI:Notify({
                Title = _Title,
                Content = _Text,
                Duration = Time,
                Icon = "bell"
            })
        end
        
        local SkidFling = function(TargetPlayer)
            local Character = Player.Character
            local Humanoid = Character and Character:FindFirstChildOfClass("Humanoid")
            local RootPart = Humanoid and Humanoid.RootPart
            local TCharacter = TargetPlayer.Character
            local THumanoid
            local TRootPart
            local THead
            local Accessory
            local Handle
            if TCharacter:FindFirstChildOfClass("Humanoid") then
                THumanoid = TCharacter:FindFirstChildOfClass("Humanoid")
            end
            if THumanoid and THumanoid.RootPart then
                TRootPart = THumanoid.RootPart
            end
            if TCharacter:FindFirstChild("Head") then
                THead = TCharacter.Head
            end
            if TCharacter:FindFirstChildOfClass("Accessory") then
                Accessory = TCharacter:FindFirstChildOfClass("Accessory")
            end
            if Accessory and Accessory:FindFirstChild("Handle") then
                Handle = Accessory.Handle
            end
            if Character and Humanoid and RootPart then
                if RootPart.Velocity.Magnitude < 50 then
                    getgenv().OldPos = RootPart.CFrame
                end
                if THumanoid and THumanoid.Sit and not AllBool then
                    return Message("WX", "ç›®æ ‡å¤„äºåå§¿", 2)
                end
                if THead then
                    workspace.CurrentCamera.CameraSubject = THead
                elseif not THead and Handle then
                    workspace.CurrentCamera.CameraSubject = Handle
                elseif THumanoid and TRootPart then
                    workspace.CurrentCamera.CameraSubject = THumanoid
                end
                if not TCharacter:FindFirstChildWhichIsA("BasePart") then
                    return
                end
                
                local FPos = function(BasePart, Pos, Ang)
                    RootPart.CFrame = CFrame.new(BasePart.Position) * Pos * Ang
                    Character:SetPrimaryPartCFrame(CFrame.new(BasePart.Position) * Pos * Ang)
                    RootPart.Velocity = Vector3.new(9e7, 9e7 * 10, 9e7)
                    RootPart.RotVelocity = Vector3.new(9e8, 9e8, 9e8)
                end
                
                local SFBasePart = function(BasePart)
                    local TimeToWait = 2
                    local Time = tick()
                    local Angle = 0
                    repeat
                        if RootPart and THumanoid then
                            if BasePart.Velocity.Magnitude < 50 then
                                Angle = Angle + 100
                                FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 0.95, CFrame.Angles(math.rad(Angle),0 ,0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 0.95, CFrame.Angles(math.rad(Angle), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(2.25, 1.5, -2.25) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 0.95, CFrame.Angles(math.rad(Angle), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(-2.25, -1.5, 2.25) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 0.95, CFrame.Angles(math.rad(Angle), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection,CFrame.Angles(math.rad(Angle), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection,CFrame.Angles(math.rad(Angle), 0, 0))
                                task.wait()
                            else
                                FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, -THumanoid.WalkSpeed), CFrame.Angles(0, 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                                task.wait()
                                
                                FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 0.95), CFrame.Angles(math.rad(90), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, -TRootPart.Velocity.Magnitude / 0.95), CFrame.Angles(0, 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, 1.5, TRootPart.Velocity.Magnitude / 0.95), CFrame.Angles(math.rad(90), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(math.rad(90), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5 ,0), CFrame.Angles(math.rad(-90), 0, 0))
                                task.wait()
                                FPos(BasePart, CFrame.new(0, -1.5, 0), CFrame.Angles(0, 0, 0))
                                task.wait()
                            end
                        else
                            break
                        end
                    until BasePart.Velocity.Magnitude > 500 or BasePart.Parent ~= TargetPlayer.Character or TargetPlayer.Parent ~= Players or not TargetPlayer.Character == TCharacter or THumanoid.Sit or Humanoid.Health <= 0 or tick() > Time + TimeToWait
                end
                
                workspace.FallenPartsDestroyHeight = 0/0
                
                local BV = Instance.new("BodyVelocity")
                BV.Name = "EpixVel"
                BV.Parent = RootPart
                BV.Velocity = Vector3.new(9e8, 9e8, 9e8)
                BV.MaxForce = Vector3.new(1/0, 1/0, 1/0)
                
                Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, false)
                
                if TRootPart and THead then
                    if (TRootPart.CFrame.p - THead.CFrame.p).Magnitude > 5 then
                        SFBasePart(THead)
                    else
                        SFBasePart(TRootPart)
                    end
                elseif TRootPart and not THead then
                    SFBasePart(TRootPart)
                elseif not TRootPart and THead then
                    SFBasePart(THead)
                elseif not TRootPart and not THead and Accessory and Handle then
                    SFBasePart(Handle)
                else
                    return Message("WX", "ç©å®¶å·²è¶‹åŠ¿", 2)
                end
                
                BV:Destroy()
                Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, true)
                workspace.CurrentCamera.CameraSubject = Humanoid
                
                repeat
                    RootPart.CFrame = getgenv().OldPos * CFrame.new(0, .5, 0)
                    Character:SetPrimaryPartCFrame(getgenv().OldPos * CFrame.new(0, .5, 0))
                    Humanoid:ChangeState("GettingUp")
                    table.foreach(Character:GetChildren(), function(_, x)
                        if x:IsA("BasePart") then
                            x.Velocity, x.RotVelocity = Vector3.new(), Vector3.new()
                        end
                    end)
                    task.wait()
                until (RootPart.Position - getgenv().OldPos.p).Magnitude < 25
                workspace.FallenPartsDestroyHeight = getgenv().FPDH
            else
                return Message("WX", "éšæœºé”™è¯¯", 2)
            end
        end
        
        local hasPlayers = false
        for _,x in next, Players:GetPlayers() do
            if x ~= Player then
                hasPlayers = true
                break
            end
        end
        if not hasPlayers then
            return Message("WX", "æ— ç©å®¶å¯ä»¥ç”©é£", 2)
        end
        
        if Targets[1] then for _,x in next, Targets do GetPlayer(x) end else return end
        if AllBool then
            for _,x in next, Players:GetPlayers() do
                if x ~= Player then
                    SkidFling(x)
                end
            end
        end
        
        Message("WX", "æ­£åœ¨ç”©é£æ‰€æœ‰ç©å®¶...", 3)
    end
})

-- ä¼ é€ç©å®¶å‰åæ–¹éƒ¨åˆ†
TabHandles.WX4:Paragraph({
    Title = "ç²¾ç¡®ä½ç½®ä¼ é€",
    Desc = "ä¼ é€åˆ°ç©å®¶çš„å‰åæ–¹ã€å¤´é¡¶ç­‰ç²¾ç¡®ä½ç½®",
    Image = "target",
    ImageSize = 20
})

-- ä¼ é€å‰æ–¹çš„è·ç¦»æ»‘å—
local frontDistance = 3
TabHandles.WX4:Slider({
    Title = "ä¼ é€å‰æ–¹çš„è·ç¦»",
    Desc = "è®¾ç½®ä¼ é€åˆ°ç©å®¶å‰æ–¹çš„è·ç¦»",
    Value = {
        Min = 1,
        Max = 50,
        Default = frontDistance
    },
    Step = 1,
    Callback = function(value)
        frontDistance = tonumber(value)
        WindUI:Notify({
            Title = "WX",
            Content = "å‰æ–¹è·ç¦»è®¾ç½®ä¸º: " .. frontDistance,
            Duration = 3,
            Icon = "ruler"
        })
    end
})

-- å¾ªç¯ä¼ é€è‡³ç©å®¶å‰æ–¹
local loopFrontTPConnection = nil
local loopFrontTPEnabled = false
TabHandles.WX4:Toggle({
    Title = "å¾ªç¯ä¼ é€è‡³ç©å®¶å‰æ–¹",
    Desc = "æŒç»­ä¼ é€åˆ°é€‰ä¸­ç©å®¶çš„å‰æ–¹",
    Value = false,
    Callback = function(state)
        loopFrontTPEnabled = state
        if state then
            WindUI:Notify({
                Title = "WX",
                Content = "å‰æ–¹ä¼ é€å·²å¼€å¯",
                Duration = 3,
                Icon = "check"
            })
            
            if loopFrontTPConnection then
                loopFrontTPConnection:Disconnect()
            end
            
            loopFrontTPConnection = RunService.Heartbeat:Connect(function()
                if not loopFrontTPEnabled or not selectedPlayer or not selectedPlayer.Character or not selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    if loopFrontTPConnection then
                        loopFrontTPConnection:Disconnect()
                        loopFrontTPConnection = nil
                    end
                    return
                end
                local targetCF = selectedPlayer.Character.HumanoidRootPart.CFrame
                local frontPos = targetCF.Position + targetCF.LookVector * frontDistance
                if game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(frontPos)
                end
            end)
        else
            if loopFrontTPConnection then
                loopFrontTPConnection:Disconnect()
                loopFrontTPConnection = nil
            end
            WindUI:Notify({
                Title = "WX",
                Content = "å‰æ–¹ä¼ é€å·²å…³é—­",
                Duration = 3,
                Icon = "x"
            })
        end
    end
})

-- ä¼ é€å¤´é¡¶çš„è·ç¦»æ»‘å—
local headDistance = 4
TabHandles.WX4:Slider({
    Title = "ä¼ é€å¤´é¡¶çš„è·ç¦»",
    Desc = "è®¾ç½®ä¼ é€åˆ°ç©å®¶å¤´é¡¶çš„è·ç¦»",
    Value = {
        Min = 1,
        Max = 50,
        Default = headDistance
    },
    Step = 1,
    Callback = function(value)
        headDistance = tonumber(value)
        WindUI:Notify({
            Title = "WX",
            Content = "å¤´é¡¶è·ç¦»è®¾ç½®ä¸º: " .. headDistance,
            Duration = 3,
            Icon = "ruler"
        })
    end
})

-- å¾ªç¯ä¼ é€è‡³ç©å®¶å¤´é¡¶
local loopHeadHeightConnection = nil
local loopHeadHeightEnabled = false
TabHandles.WX4:Toggle({
    Title = "å¾ªç¯ä¼ é€è‡³ç©å®¶å¤´é¡¶",
    Desc = "æŒç»­ä¼ é€åˆ°é€‰ä¸­ç©å®¶çš„å¤´é¡¶",
    Value = false,
    Callback = function(state)
        loopHeadHeightEnabled = state
        if state then
            WindUI:Notify({
                Title = "WX",
                Content = "å¤´é¡¶ä¼ é€å·²å¼€å¯",
                Duration = 3,
                Icon = "check"
            })
            
            if loopHeadHeightConnection then
                loopHeadHeightConnection:Disconnect()
            end
            
            loopHeadHeightConnection = RunService.Heartbeat:Connect(function()
                if not loopHeadHeightEnabled or not selectedPlayer or not selectedPlayer.Character or not selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    if loopHeadHeightConnection then
                        loopHeadHeightConnection:Disconnect()
                        loopHeadHeightConnection = nil
                    end
                    return
                end
                local targetPos = selectedPlayer.Character.HumanoidRootPart.Position
                if game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(targetPos.X, targetPos.Y + headDistance, targetPos.Z)
                end
            end)
        else
            if loopHeadHeightConnection then
                loopHeadHeightConnection:Disconnect()
                loopHeadHeightConnection = nil
            end
            WindUI:Notify({
                Title = "WX",
                Content = "å¤´é¡¶ä¼ é€å·²å…³é—­",
                Duration = 3,
                Icon = "x"
            })
        end
    end
})

-- ä¼ é€åé¢çš„è·ç¦»æ»‘å—
local backDistance = 2
TabHandles.WX4:Slider({
    Title = "ä¼ é€åé¢çš„è·ç¦»",
    Desc = "è®¾ç½®ä¼ é€åˆ°ç©å®¶åé¢çš„è·ç¦»",
å€¼={
min=1ï¼Œ
æœ€å¤§å€¼=50ï¼Œ
é»˜è®¤å€¼=backDistance
    },
æ­¥é•¿=1ï¼Œ
callback=å‡½æ•°(å€¼)
backDistance=tonumber(å€¼)
WindUIï¼šé€šçŸ¥({
title="WX"ï¼Œ
content="åé¢è·ç¦»è®¾ç½®ä¸ºï¼š"..backDistanceï¼Œ
æŒç»­æ—¶é—´=3ï¼Œ
icon="æ ‡å°º"
        })
ç»“æŸ
})

-- å¾ªç¯ä¼ é€è‡³ç©å®¶åé¢
local loopBackTPConnection=nil
local loopBackTPEnabled=false
TabHandles.WX4ï¼šåˆ‡æ¢({
æ ‡é¢˜="å¾ªç¯ä¼ é€è‡³ç©å®¶åé¢"ï¼Œ
DESC="æŒç»­ä¼ é€åˆ°é€‰ä¸­ç©å®¶çš„åé¢"ï¼Œ
å€¼=falseï¼Œ
å›è°ƒ=å‡½æ•°(çŠ¶æ€)
loopBackTPEnabled=çŠ¶æ€
å¦‚æœè¯´æ˜ï¼Œåˆ™
WindUIï¼šé€šçŸ¥({
title="WX"ï¼Œ
å†…å®¹="åé¢ä¼ é€å·²å¼€å¯"ï¼Œ
æŒç»­æ—¶é—´=3ï¼Œ
å›¾æ ‡="æ£€æŸ¥"
            })
            
å¦‚æœloopBackTPConnectionï¼Œåˆ™
loopBackTPConnection:Disconnect()
ç»“æŸ
            
loopBackTPConnection=RunServiceã€‚å¿ƒè·³ï¼šè¿æ¥(å‡½æ•°()
å¦‚æœä¸æ˜¯loopBackTPEnabledæˆ–ä¸æ˜¯selectedPlayeræˆ–ä¸æ˜¯selectedPlayer.Characteræˆ–ä¸æ˜¯selectedPlayerã€‚è§’è‰²ï¼šFindFirstChild("HumanoidRootPart")ç„¶å
å¦‚æœloopBackTPConnectionï¼Œåˆ™
loopBackTPConnection:Disconnect()
loopBackTPConnection=nil
ç»“æŸ
è¿”å›
ç»“æŸ
æœ¬åœ°targetCF=selectedPlayerã€‚æ€§æ ¼ã€‚HumanoidRootPart.cframe
æœ¬åœ°backPos=targetCFã€‚ä½ç½®-targetCF.å¤–è§‚çŸ¢é‡*backDistance
if game.Players.LocalPlayer.Characterå’Œæ¸¸æˆã€‚ç©å®¶ã€‚æœ¬åœ°ç©å®¶ã€‚è§’è‰²ï¼šå¯»æ‰¾ç¬¬ä¸€ä¸ªå­©å­(â€œHumanoidRootPartâ€)ç„¶å
æ¸¸æˆã€‚ç©å®¶ã€‚æœ¬åœ°ç©å®¶ã€‚æ€§æ ¼ã€‚HumanoidRootPart.cframe=CFrame.new(backPos)
ç»“æŸ
ç»“æŸ)
å…¶ä»–
å¦‚æœloopBackTPConnectionï¼Œåˆ™
loopBackTPConnection:Disconnect()
loopBackTPConnection=nil
ç»“æŸ
WindUIï¼šé€šçŸ¥({
title="WX"ï¼Œ
å†…å®¹="åé¢ä¼ é€å·²å…³é—­"ï¼Œ
æŒç»­æ—¶é—´=3ï¼Œ
å›¾æ ‡="x"
            })
ç»“æŸ
ç»“æŸ
})

-- åˆå§‹åŒ–ç©å®¶åˆ—è¡¨
refreshPlayers()
--================ç”©é£æ ‡ç­¾é¡µæ–°å¢åŠŸèƒ½ç»“æŸ================
-- æœ€åé€šçŸ¥
WindUIï¼šé€šçŸ¥({
title="WXè„šæœ¬å·²åŠ è½½"ï¼Œ
å†…å®¹="æ¬¢è¿ä½¿ç”¨WXå¤šåŠŸèƒ½è„šæœ¬ï¼\nç¥æ‚¨æ¸¸æˆæ„‰å¿«ï¼"ï¼Œ
å›¾æ ‡="æ£€æŸ¥åœ†åœˆ"ï¼Œ
æŒç»­æ—¶é—´=5
})
